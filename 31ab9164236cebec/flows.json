[{"id":"31ab9164236cebec","type":"tab","label":"Ping","disabled":false,"info":"","env":[]},{"id":"dc8796eaac51a63c","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":380,"wires":[["bae147551dbbc611"]]},{"id":"bae147551dbbc611","type":"function","z":"31ab9164236cebec","name":"response","func":"// ok = true если код ответа равен 200\nconst ok = msg.statusCode === 200 ? true : false;\n\n// если статус изменился с прошлой проверки\nconst isChange = global.get(msg.name) !== ok;\n\n// запоминаем новое значение если изменилось\nif (isChange) {\n    global.set(msg.name, ok);\n}\n\n// формируем блок ответа\nmsg.response = {\n    serviceName: msg.name,\n    ok: ok,\n    isChange: isChange,\n    time: new Date().getTime() - msg.timeStart\n}\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":500,"wires":[["15d477c771f5ce98"]]},{"id":"15d477c771f5ce98","type":"join","z":"31ab9164236cebec","name":"join","mode":"custom","build":"array","property":"response","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"18","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":830,"y":540,"wires":[["fe7dfcb73d2c37ab"]]},{"id":"e22a90d2c8c292c8","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":420,"wires":[["db4fab655a4717c0","8713ccd969e9f67d"]]},{"id":"c81ace9bb68530b2","type":"function","z":"31ab9164236cebec","name":"Auth","func":"const name = 'Auth';\nconst port = 52431;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Auth', false);\n","finalize":"","libs":[],"x":350,"y":380,"wires":[["dc8796eaac51a63c"]]},{"id":"12ed77a462754e41","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":420,"wires":[["bae147551dbbc611"]]},{"id":"db4fab655a4717c0","type":"function","z":"31ab9164236cebec","name":"BaseClassifiers","func":"const name = 'BaseClassifiers';\nconst port = 52432;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('BaseClassifiers', false);","finalize":"","libs":[],"x":380,"y":420,"wires":[["12ed77a462754e41"]]},{"id":"8713ccd969e9f67d","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":460,"wires":[["a9377378005ee5af","3bc0db8c3f88edb6"]]},{"id":"48421e04b7fc2ac3","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":460,"wires":[["bae147551dbbc611"]]},{"id":"a9377378005ee5af","type":"function","z":"31ab9164236cebec","name":"QA","func":"const name = 'QA';\nconst port = 52433;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('QA', false);","finalize":"","libs":[],"x":350,"y":460,"wires":[["48421e04b7fc2ac3"]]},{"id":"3bc0db8c3f88edb6","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":500,"wires":[["3a18902336b208d4","e32e14e0e06d137f"]]},{"id":"da4f0c7aa11de9f8","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":500,"wires":[["bae147551dbbc611"]]},{"id":"3a18902336b208d4","type":"function","z":"31ab9164236cebec","name":"CIP","func":"const name = 'CIP';\nconst port = 52434;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('CIP', false);","finalize":"","libs":[],"x":350,"y":500,"wires":[["da4f0c7aa11de9f8"]]},{"id":"e32e14e0e06d137f","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":540,"wires":[["a934ea92e7d5ee8e","fd3e111c8f6088b1"]]},{"id":"12c9090853f955a2","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":540,"wires":[["bae147551dbbc611"]]},{"id":"a934ea92e7d5ee8e","type":"function","z":"31ab9164236cebec","name":"Checklists","func":"const name = 'Checklists';\nconst port = 52435;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Checklists', false);","finalize":"","libs":[],"x":370,"y":540,"wires":[["12c9090853f955a2"]]},{"id":"fd3e111c8f6088b1","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":580,"wires":[["99c28a5c8014b942","2c7e2377f2b5d57f"]]},{"id":"7c40de97e60490e6","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":580,"wires":[["bae147551dbbc611"]]},{"id":"99c28a5c8014b942","type":"function","z":"31ab9164236cebec","name":"TaskManagement","func":"const name = 'TaskManagement';\nconst port = 52436;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('TaskManagement', false);","finalize":"","libs":[],"x":390,"y":580,"wires":[["7c40de97e60490e6"]]},{"id":"2c7e2377f2b5d57f","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":620,"wires":[["81911de6f3bf7924","3255938f7b37e914"]]},{"id":"e528c97c63b05b47","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":620,"wires":[["bae147551dbbc611"]]},{"id":"81911de6f3bf7924","type":"function","z":"31ab9164236cebec","name":"Scheduler","func":"const name = 'Scheduler';\nconst port = 52437;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Scheduler', false);","finalize":"","libs":[],"x":360,"y":620,"wires":[["e528c97c63b05b47"]]},{"id":"3255938f7b37e914","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":660,"wires":[["daee3214e92d357c","a77db8ab12629842"]]},{"id":"84263173e729c1ec","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":660,"wires":[["bae147551dbbc611"]]},{"id":"daee3214e92d357c","type":"function","z":"31ab9164236cebec","name":"Workflow","func":"const name = 'Workflow';\nconst port = 52438;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Workflow', false);","finalize":"","libs":[],"x":360,"y":660,"wires":[["84263173e729c1ec"]]},{"id":"a77db8ab12629842","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":700,"wires":[["aa89438bfd5137b5","94ca6c37265df959"]]},{"id":"04e86219ccd5ae1a","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":700,"wires":[["bae147551dbbc611"]]},{"id":"aa89438bfd5137b5","type":"function","z":"31ab9164236cebec","name":"ChecklistCreatorBySchedule","func":"const name = 'ChecklistCreatorBySchedule';\nconst port = 52439;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('ChecklistCreatorBySchedule', false);","finalize":"","libs":[],"x":420,"y":700,"wires":[["04e86219ccd5ae1a"]]},{"id":"94ca6c37265df959","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":740,"wires":[["ecea7b9b7934419b","485c5a73b578b613"]]},{"id":"8410fc75694c140f","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":740,"wires":[["bae147551dbbc611"]]},{"id":"ecea7b9b7934419b","type":"function","z":"31ab9164236cebec","name":"LabEquipment","func":"const name = 'LabEquipment';\nconst port = 52441;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('LabEquipment', false);","finalize":"","libs":[],"x":380,"y":740,"wires":[["8410fc75694c140f"]]},{"id":"485c5a73b578b613","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":780,"wires":[["f70e1c2b3f8862bb","4be07427145490ba"]]},{"id":"146abe09de0de2bc","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":780,"wires":[["bae147551dbbc611"]]},{"id":"f70e1c2b3f8862bb","type":"function","z":"31ab9164236cebec","name":"Notifications","func":"const name = 'Notifications';\nconst port = 52442;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Notifications', false);","finalize":"","libs":[],"x":370,"y":780,"wires":[["146abe09de0de2bc"]]},{"id":"4be07427145490ba","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":820,"wires":[["94029650daf25211","b2964e05d3e91530"]]},{"id":"e56c212d1c77a4b4","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":820,"wires":[["bae147551dbbc611"]]},{"id":"94029650daf25211","type":"function","z":"31ab9164236cebec","name":"FileManager","func":"const name = 'FileManager';\nconst port = 52446;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('FileManager', false);","finalize":"","libs":[],"x":370,"y":820,"wires":[["e56c212d1c77a4b4"]]},{"id":"b2964e05d3e91530","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":860,"wires":[["bfb7259343163f04","6fed178d78678304"]]},{"id":"9601b355545859e7","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":860,"wires":[["bae147551dbbc611"]]},{"id":"bfb7259343163f04","type":"function","z":"31ab9164236cebec","name":"BatchManagement","func":"const name = 'BatchManagement';\nconst port = 52448;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('BatchManagement', false);","finalize":"","libs":[],"x":390,"y":860,"wires":[["9601b355545859e7"]]},{"id":"6fed178d78678304","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":900,"wires":[["023a086d026e90ce","1930c8bdc61212d4"]]},{"id":"cc27b8b6a95f56ac","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":900,"wires":[["bae147551dbbc611"]]},{"id":"023a086d026e90ce","type":"function","z":"31ab9164236cebec","name":"ProductionManagement","func":"const name = 'ProductionManagement';\nconst port = 52449;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('ProductionManagement', false);","finalize":"","libs":[],"x":410,"y":900,"wires":[["cc27b8b6a95f56ac"]]},{"id":"1930c8bdc61212d4","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":940,"wires":[["2e9bec5f88457402","c73af6afb74a68b1"]]},{"id":"6c3fc79b48fe924e","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":940,"wires":[["bae147551dbbc611"]]},{"id":"2e9bec5f88457402","type":"function","z":"31ab9164236cebec","name":"DisplayManagement","func":"const name = 'DisplayManagement';\nconst port = 52452;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('DisplayManagement', false);","finalize":"","libs":[],"x":400,"y":940,"wires":[["6c3fc79b48fe924e"]]},{"id":"c73af6afb74a68b1","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":980,"wires":[["3e03509d5844d497","1d78da4cc6d7bc4b"]]},{"id":"5c715ead1aab6bfd","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":980,"wires":[["bae147551dbbc611"]]},{"id":"3e03509d5844d497","type":"function","z":"31ab9164236cebec","name":"ServiceManager","func":"const name = 'ServiceManager';\nconst port = 52453;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('ServiceManager', false);","finalize":"","libs":[],"x":380,"y":980,"wires":[["5c715ead1aab6bfd"]]},{"id":"1d78da4cc6d7bc4b","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":1020,"wires":[["3bab47fcad2f7d9d","036144b9a18968e6"]]},{"id":"47fef28a43a455f9","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":1020,"wires":[["bae147551dbbc611"]]},{"id":"3bab47fcad2f7d9d","type":"function","z":"31ab9164236cebec","name":"IncidentManager","func":"const name = 'IncidentManager';\nconst port = 52455;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('IncidentManager', false);","finalize":"","libs":[],"x":390,"y":1020,"wires":[["47fef28a43a455f9"]]},{"id":"036144b9a18968e6","type":"delay","z":"31ab9164236cebec","name":"1","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":210,"y":1060,"wires":[["8c338b664d5cd769"]]},{"id":"5b1d6c95c742e89e","type":"http request","z":"31ab9164236cebec","name":"Ping","method":"GET","ret":"txt","paytoqs":"ignore","url":"","tls":"","persist":false,"proxy":"","insecureHTTPParser":false,"authType":"","senderr":false,"headers":[],"x":610,"y":1060,"wires":[["bae147551dbbc611"]]},{"id":"8c338b664d5cd769","type":"function","z":"31ab9164236cebec","name":"Reception","func":"const name = 'Reception';\nconst port = 52461;\n\n\n// настройки\nconst url = 'http://localhost'\nconst path = '/api/ping'\n\n\nmsg.timeStart = new Date().getTime();\nmsg.name = name;\nmsg.url = `${url}:${port}${path}`;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('Reception', false);","finalize":"","libs":[],"x":360,"y":1060,"wires":[["5b1d6c95c742e89e"]]},{"id":"fe7dfcb73d2c37ab","type":"function","z":"31ab9164236cebec","name":"Create Msg","func":"const all = global.get('firstRun');\nconst server = global.get('server');\n\nconst icon = {\n    true: '✅',\n    false: '🛑'\n}\n\nlet message = ``;\n\nfor (let item of msg.response) {\n    if (item.isChange || all) {\n        message += `${icon[item.ok]} ${item.serviceName} (${item.time}ms)  \\r\\n`;\n    }\n}\n\nlet chatId = '';\n\nif (msg.topic !== 'auto' && !!msg.chatId) {\n    chatId = msg.chatId;\n} else {\n    chatId = -4054697456;//486991331; //\n}\n\nmsg.message = message;\n\nmsg.payload = {\n    content: message,\n    chatId: chatId,\n    type: 'message',\n    options: {\n        parse_mode: 'HTML'\n    }\n}\n\nglobal.set('firstRun', false);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":580,"wires":[["89e23be9765c3332","354f306a0cf41b7d","725248f0bb1683f5"]]},{"id":"c8cfcfef1ea5f174","type":"function","z":"31ab9164236cebec","name":"Settings","func":"if (!!msg.payload.chatId) {\n    msg.chatId = msg.payload.chatId;\n}\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"// Добавленный здесь код будет исполняться\n// однократно при развертывании узла.\nglobal.set('firstRun', false);\nglobal.set('server', 'Develop_226');","finalize":"","libs":[],"x":200,"y":340,"wires":[["c81ace9bb68530b2","e22a90d2c8c292c8"]]},{"id":"173e2584df81fa21","type":"function","z":"31ab9164236cebec","name":"Setup","func":"global.set('firstRun', true);\nmsg.noSend = false;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":830,"y":420,"wires":[["c8cfcfef1ea5f174"]]},{"id":"e47496e25b5a32bc","type":"function","z":"31ab9164236cebec","name":"function 1","func":"msg.topic = \n\"SELECT serviceName, \\\n       JSON_GROUP_ARRAY(status) AS status_history \\\nFROM ServiceStatus \\\nWHERE dateChecked >= date('now', '-60 days') \\\nGROUP BY serviceName;\";\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1160,"y":580,"wires":[["c3bf94f311548d73"]]},{"id":"89e23be9765c3332","type":"function","z":"31ab9164236cebec","name":"SQL","func":"\nlet b = '';\nfor (const item of msg.response) {\n    b += `('${item.serviceName}', '${item.ok.toString()}', DATE('now')), `\n}\nb = b.slice(0, -2);\n\nconst a = 'INSERT INTO ServiceStatus (serviceName, status, dateChecked) VALUES ';\nconst c = ' ON CONFLICT(serviceName, dateChecked) DO UPDATE SET status=excluded.status';\n\nmsg.topic = a + b + c;\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":340,"wires":[["6e6194f7308cb9b2"]]},{"id":"04230879b2017a37","type":"http in","z":"31ab9164236cebec","name":"","url":"/api/ping","method":"get","upload":false,"swaggerDoc":"","x":1170,"y":540,"wires":[["e47496e25b5a32bc"]]},{"id":"ce3bf8351036b541","type":"http response","z":"31ab9164236cebec","name":"","statusCode":"","headers":{},"x":1150,"y":680,"wires":[]},{"id":"1c595b34ef405806","type":"websocket out","z":"31ab9164236cebec","name":"","server":"222c41f74918bbe8","client":"","x":1290,"y":440,"wires":[]},{"id":"354f306a0cf41b7d","type":"function","z":"31ab9164236cebec","name":"WS","func":"msg.payload = msg.response;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":440,"wires":[["1c595b34ef405806"]]},{"id":"74c1b408dfb5e7c2","type":"http in","z":"31ab9164236cebec","name":"","url":"/api/ping/ws","method":"get","upload":false,"swaggerDoc":"","x":1180,"y":140,"wires":[["fbd5173afd327e67"]]},{"id":"fbd5173afd327e67","type":"function","z":"31ab9164236cebec","name":"Setup","func":"global.set('firstRun', true);\nmsg.noSend = true;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1150,"y":180,"wires":[["c8cfcfef1ea5f174"]]},{"id":"725248f0bb1683f5","type":"switch","z":"31ab9164236cebec","name":"","property":"noSend","propertyType":"msg","rules":[{"t":"false"}],"checkall":"true","repair":false,"outputs":1,"x":850,"y":620,"wires":[["c943cbb0ef42af52"]]},{"id":"5d40ac377a659212","type":"function","z":"31ab9164236cebec","name":"Setup","func":"\nmsg.noSend = false;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":190,"y":280,"wires":[["c8cfcfef1ea5f174"]]},{"id":"8fbc9f9158d9c37f","type":"comment","z":"31ab9164236cebec","name":"Request new data","info":"","x":1190,"y":100,"wires":[]},{"id":"01196696f42e9f83","type":"comment","z":"31ab9164236cebec","name":"Write to DB","info":"","x":1170,"y":300,"wires":[]},{"id":"41301d3e833d3053","type":"comment","z":"31ab9164236cebec","name":"Send actual data","info":"","x":1180,"y":400,"wires":[]},{"id":"0f272aa6f8b46299","type":"comment","z":"31ab9164236cebec","name":"Send historical data","info":"","x":1190,"y":500,"wires":[]},{"id":"665f79a7a02a6520","type":"cronplus","z":"31ab9164236cebec","d":true,"name":"Cron","outputField":"payload","timeZone":"","storeName":"","commandResponseMsgOutput":"output1","defaultLocation":"","defaultLocationType":"default","outputs":1,"options":[{"name":"schedule1","topic":"auto","payloadType":"default","payload":"","expressionType":"cron","expression":"0 */10 * * * *","location":"","offset":"0","solarType":"all","solarEvents":"sunrise,sunset"}],"x":190,"y":220,"wires":[["5d40ac377a659212"]]},{"id":"8644b38279ce8bea","type":"telegram command","z":"31ab9164236cebec","name":"","command":"/check","description":"","registercommand":false,"language":"","scope":"default","bot":"a64df35521da0350","strict":false,"hasresponse":true,"useregex":false,"removeregexcommand":false,"outputs":2,"x":830,"y":360,"wires":[["173e2584df81fa21"],[]]},{"id":"c943cbb0ef42af52","type":"telegram sender","z":"31ab9164236cebec","name":"Send Message","bot":"a64df35521da0350","haserroroutput":false,"outputs":1,"x":860,"y":660,"wires":[[]]},{"id":"6e6194f7308cb9b2","type":"sqlite","z":"31ab9164236cebec","mydb":"1747653260eb100c","sqlquery":"msg.topic","sql":"","name":"Write","x":1270,"y":340,"wires":[[]]},{"id":"c3bf94f311548d73","type":"sqlite","z":"31ab9164236cebec","mydb":"1747653260eb100c","sqlquery":"msg.topic","sql":"","name":"Read","x":1150,"y":620,"wires":[["ce3bf8351036b541"]]},{"id":"222c41f74918bbe8","type":"websocket-listener","path":"/ws/ping","wholemsg":"false"},{"id":"a64df35521da0350","type":"telegram bot","botname":"HochlandControl_bot","usernames":"","chatids":"","baseapiurl":"","testenvironment":false,"updatemode":"polling","pollinterval":"1000","usesocks":false,"sockshost":"","socksprotocol":"socks5","socksport":"6667","socksusername":"anonymous","sockspassword":"","bothost":"","botpath":"","localbotport":"8443","publicbotport":"8443","privatekey":"","certificate":"","useselfsignedcertificate":false,"sslterminated":false,"verboselogging":false},{"id":"1747653260eb100c","type":"sqlitedb","db":"C:\\Jenkins\\ping\\ping.db","mode":"RWC"}]